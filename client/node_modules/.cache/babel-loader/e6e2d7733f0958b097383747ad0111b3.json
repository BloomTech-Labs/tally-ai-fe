{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Raudel Flores\\\\Documents\\\\Lambda-School\\\\LABS\\\\tally\\\\tally-ai-fe\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\Raudel Flores\\\\Documents\\\\Lambda-School\\\\LABS\\\\tally\\\\tally-ai-fe\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Raudel Flores\\\\Documents\\\\Lambda-School\\\\LABS\\\\tally\\\\tally-ai-fe\\\\client\\\\src\\\\components\\\\ToggleFavoriteButton.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { setFavorites } from \"../actions/index\"; //needs to be passed a business object of this format:\n// business: {\n//     // for DS API calls\n//     businessId: null,\n//     // for side bar\n//     businessName: null,\n//     businessImg: null,\n//     // for top-of-page info cards\n//     reviewCount: 0,\n//     averageRating: 0\n//   }\n\nconst ToggleFavoriteButton = props => {\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        favorited = _useState2[0],\n        setFavorited = _useState2[1];\n\n  useEffect(() => {\n    setFavorited(false);\n\n    if (props.business) {\n      props.favorites.forEach(favorite => {\n        console.log(favorite.businessId, \"===\", props.business.id);\n\n        if (favorite.businessId === props.business.id) {\n          setFavorited(true);\n        }\n      });\n    }\n  }, [props.favorites]);\n  let favSrc = \"https://image.flaticon.com/icons/svg/149/149220.svg\";\n\n  if (props.error || !props.business || !props.favorites) {\n    //had an error or data not in props yet, just default to unfavorited icon\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: favSrc,\n      style: {\n        width: \"20px\",\n        height: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }), \"err\");\n  }\n\n  if (favorited) favSrc = \"https://image.flaticon.com/icons/svg/148/148839.svg\";\n\n  function toggle(e) {\n    if (!props.isSettingFavorites && props.business) {\n      //make sure we're not trying to toggle again before the last toggle has even reached the backend and come back again (would happen when the user clicks repeatedly)\n      console.log(\"BUTTON SETTING FAVS\", props.favorites.concat([props.business]));\n\n      if (!favorited) {\n        props.setFavorites(props.favorites.concat([_objectSpread({}, props.business, {\n          businessId: props.business.businessId\n        })]), 0); //duplicate and add new favorite, and set state\n      } else {\n        props.setFavorites(props.favorites.filter(fav => {\n          return !(fav.businessId === props.business.businessId);\n        }), 0); //duplicate and remove favorite, and set state\n      }\n    }\n  }\n\n  return React.createElement(\"img\", {\n    src: favSrc,\n    style: {\n      width: \"20px\",\n      height: \"20px\"\n    },\n    onClick: e => {\n      toggle(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  });\n};\n\nconst mapStateToProps = state => ({\n  favorites: state.favorites.favorites,\n  isSettingFavorites: state.favorites.isSetting,\n  error: state.favorites.error\n});\n\nexport default connect(mapStateToProps, {\n  setFavorites\n})(ToggleFavoriteButton);","map":{"version":3,"sources":["C:/Users/Raudel Flores/Documents/Lambda-School/LABS/tally/tally-ai-fe/client/src/components/ToggleFavoriteButton.js"],"names":["React","useEffect","useState","connect","setFavorites","ToggleFavoriteButton","props","favorited","setFavorited","business","favorites","forEach","favorite","console","log","businessId","id","favSrc","error","width","height","toggle","e","isSettingFavorites","concat","filter","fav","mapStateToProps","state","isSetting"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setFavorites } from \"../actions/index\";\r\n\r\n//needs to be passed a business object of this format:\r\n// business: {\r\n//     // for DS API calls\r\n//     businessId: null,\r\n//     // for side bar\r\n//     businessName: null,\r\n//     businessImg: null,\r\n//     // for top-of-page info cards\r\n//     reviewCount: 0,\r\n//     averageRating: 0\r\n//   }\r\n\r\nconst ToggleFavoriteButton = (props) => {\r\n\r\n    const [favorited, setFavorited] = useState();\r\n\r\n    useEffect(() => {\r\n        setFavorited(false);\r\n        if (props.business) {\r\n            props.favorites.forEach((favorite) => {\r\n                console.log(favorite.businessId, \"===\", props.business.id);\r\n                if (favorite.businessId === props.business.id) {\r\n                    setFavorited(true);\r\n                }\r\n            })\r\n        }\r\n    }, [props.favorites])\r\n\r\n    let favSrc = \"https://image.flaticon.com/icons/svg/149/149220.svg\";\r\n\r\n    if (props.error || !props.business || !props.favorites) {//had an error or data not in props yet, just default to unfavorited icon\r\n        return <div><img src={favSrc} style={{ width: \"20px\", height: \"20px\" }}></img>err</div>\r\n    }\r\n\r\n    if (favorited) favSrc = \"https://image.flaticon.com/icons/svg/148/148839.svg\";\r\n\r\n    function toggle(e) {\r\n        if (!props.isSettingFavorites && props.business) {//make sure we're not trying to toggle again before the last toggle has even reached the backend and come back again (would happen when the user clicks repeatedly)\r\n            console.log(\"BUTTON SETTING FAVS\", props.favorites.concat([props.business]));\r\n            if (!favorited) {\r\n                props.setFavorites(props.favorites.concat([{ ...props.business, businessId: props.business.businessId }]), 0);//duplicate and add new favorite, and set state\r\n            } else {\r\n                props.setFavorites(props.favorites.filter((fav) => { return !(fav.businessId === props.business.businessId) }), 0);//duplicate and remove favorite, and set state\r\n            }\r\n        }\r\n    }\r\n\r\n    return (<img src={favSrc} style={{ width: \"20px\", height: \"20px\" }} onClick={(e) => { toggle(e) }}></img>)\r\n\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    favorites: state.favorites.favorites,\r\n    isSettingFavorites: state.favorites.isSetting,\r\n    error: state.favorites.error\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n    setFavorites\r\n})(ToggleFavoriteButton);\r\n"]},"metadata":{},"sourceType":"module"}