{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Raudel Flores\\\\Documents\\\\Lambda-School\\\\LABS\\\\tally\\\\tally-ai-fe\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\Raudel Flores\\\\Documents\\\\Lambda-School\\\\LABS\\\\tally\\\\tally-ai-fe\\\\client\\\\src\\\\components\\\\dashboard\\\\dashboardPlus.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Link from \"@material-ui/core/Link\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DeleteForeverOutlinedIcon from '@material-ui/icons/DeleteForeverOutlined';\nimport DeleteForeverTwoToneIcon from '@material-ui/icons/DeleteForeverTwoTone';\nimport AddIcon from '@material-ui/icons/Add';\nimport Fab from '@material-ui/core/Fab';\nimport SearchPage from \"../../components/SearchPage\"; // import Results from \"../components/search/results\";\n\nimport { fetchBusinesses, addBusiness, addCompetitor, removeBusiness, removeCompetitor, selectBusiness, setActiveTabs } from \"../../actions/index\";\nimport axios from \"axios\";\nconst mapsKey = process.env.REACT_APP_MAPS_KEY;\nconst useStyles = makeStyles(theme => ({\n  card: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    transitionDuration: \"0.3s\",\n    width: \"25%\",\n    height: \"40%\",\n    margin: 20,\n    padding: 20,\n    borderRadius: 20,\n    position: \"relative\"\n  } // root: {\n  //   flexGrow: 1,\n  //   display: \"flex\",\n  //   paddingTop: \"5%\",\n  //   flexDirection: \"column\"\n  // },\n  // paper: {\n  //   padding: theme.spacing(1),\n  //   textAlign: \"center\",\n  //   color: theme.palette.text.secondary\n  // }\n\n}));\n\nfunction DashboardPlus(props) {\n  const classes = useStyles(); //get the currently selected tab, and set it to the newly selected business\n\n  function modifyActiveTab(business) {\n    let contains = null;\n    props.activeTabs.forEach(tab => {\n      if (tab.businessId === business.businessId) {\n        contains = tab;\n      }\n    });\n\n    if (contains) {\n      props.selectBusiness(props.selectedBusiness, contains); //the user is trying to add a business that they already have a tab open for, just set that tab as selected\n    } else {\n      props.activeTabs.forEach(tab => {\n        if (tab.businessId === props.selectedBusiness.businessId) {\n          //the currently selected tab is always the currently selected business, so we can find it by seeing which tab = currentlySelectedBusiness\n          console.log(\"Got active tab\");\n          let tabIndex;\n          let newTabsArray = props.activeTabs.filter((item, index) => {\n            console.log(\"FILTER INDEX\", index);\n\n            if (item.businessId === tab.businessId) {\n              tabIndex = index;\n            }\n\n            return item.businessId != tab.businessId;\n          }); //remove the tab we want to modify\n\n          newTabsArray.splice(tabIndex, 0, _objectSpread({}, business)); //add back the tab but with the new name\n\n          console.log(\"Adding tab at index\", tabIndex);\n          props.setActiveTabs(props.activeTabs, newTabsArray, localStorage.getItem(\"userID\"));\n        }\n      });\n    }\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"business-results\",\n    style: {\n      width: \"90%\",\n      height: \"40%\",\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      flexDirection: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",\n      backgroundColor: \"white\",\n      marginLeft: \"5%\",\n      marginTop: '5%',\n      borderRadius: 20,\n      marginBottom: '5%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    style: {\n      color: \"black\",\n      marginLeft: \"3vh\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"My Businesses\"), React.createElement(Tooltip, {\n    title: \"Add a Business\",\n    arrow: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: classes.card,\n    onClick: () => {\n      props.history.push(\"/search/business\");\n    },\n    style: {\n      justifyContent: 'center',\n      alignItems: 'center',\n      height: \"20vh\",\n      cursor: \"pointer\",\n      width: \"15vw\",\n      backgroundColor: \"#D7E2EB\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(Fab, {\n    disabled: true,\n    \"aria-label\": \"add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(AddIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })))), console.log(\"Displaying business images of businesses: \", props.businesses), props.businesses.slice(0, 10).map(business => {\n    return React.createElement(Card, {\n      className: classes.card,\n      onClick: () => {\n        modifyActiveTab(business);\n        props.selectBusiness(props.selectedBusiness, business);\n      },\n      style: {\n        justifyContent: 'center',\n        alightItems: 'center',\n        height: \"20vh\",\n        cursor: \"pointer\",\n        width: \"15vw\",\n        backgroundColor: \"#D7E2EB\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Tooltip, {\n      title: \"Delete\",\n      arrow: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(DeleteForeverOutlinedIcon, {\n      onClick: event => event.stopPropagation() & props.removeBusiness(business.id, localStorage.getItem(\"userID\")),\n      style: {\n        position: \"absolute\",\n        top: \"0\",\n        right: \"0\",\n        left: \"auto\",\n        margin: \"1vh\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, business.businessName), React.createElement(\"img\", {\n      style: {\n        objectFit: \"cover\",\n        width: \"100%\",\n        height: \"80%\",\n        borderRadius: \"10%\"\n      },\n      src: business.businessImg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }));\n  })), React.createElement(\"div\", {\n    className: \"competitors-results\",\n    style: {\n      width: \"90%\",\n      height: \"40%\",\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      flexDirection: \"row\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",\n      backgroundColor: \"white\",\n      marginLeft: \"5%\",\n      marginTop: '5%',\n      borderRadius: 20,\n      marginBottom: '5%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    style: {\n      color: \"black\",\n      marginLeft: \"3vh\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \"My Competitors\"), React.createElement(Tooltip, {\n    title: \"Add a Competitor\",\n    arrow: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: classes.card,\n    onClick: () => {\n      props.history.push(\"/search/competitor\");\n    },\n    style: {\n      justifyContent: 'center',\n      alignItems: 'center',\n      height: \"20vh\",\n      cursor: \"pointer\",\n      width: \"15vw\",\n      backgroundColor: \"#D7E2EB\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(Fab, {\n    disabled: true,\n    \"aria-label\": \"add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(AddIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  })))), props.competitors.slice(0, 10).map(competitor => {\n    return React.createElement(Card, {\n      className: classes.card,\n      onClick: () => {\n        modifyActiveTab(competitor);\n        props.selectBusiness(props.selectedBusiness, competitor);\n      },\n      style: {\n        justifyContent: 'center',\n        alightItems: 'center',\n        height: \"20vh\",\n        cursor: \"pointer\",\n        width: \"15vw\",\n        backgroundColor: \"#D7E2EB\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Tooltip, {\n      title: \"Delete\",\n      arrow: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(DeleteForeverOutlinedIcon, {\n      onClick: event => event.stopPropagation() & props.removeCompetitor(competitor.id, localStorage.getItem(\"userID\")),\n      style: {\n        position: \"absolute\",\n        top: \"0\",\n        right: \"0\",\n        left: \"auto\",\n        margin: \"1vh\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, competitor.businessName), React.createElement(\"img\", {\n      style: {\n        objectFit: \"cover\",\n        width: \"100%\",\n        height: \"80%\",\n        borderRadius: \"10%\"\n      },\n      src: competitor.businessImg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }));\n  })));\n}\n\nconst mapStateToProps = state => ({\n  competitors: state.competitors.businesses,\n  businesses: state.userBusinesses.businesses,\n  activeTabs: state.tabs.activeTabs,\n  selectedBusiness: state.currentlySelectedBusiness\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  fetchBusinesses,\n  addBusiness,\n  addCompetitor,\n  removeBusiness,\n  removeCompetitor,\n  setActiveTabs,\n  selectBusiness\n})(DashboardPlus));","map":{"version":3,"sources":["C:/Users/Raudel Flores/Documents/Lambda-School/LABS/tally/tally-ai-fe/client/src/components/dashboard/dashboardPlus.js"],"names":["React","useEffect","useState","connect","withRouter","makeStyles","TextField","Button","Card","CardActionArea","CardActions","Link","CardContent","Typography","Paper","Tooltip","DeleteForeverOutlinedIcon","DeleteForeverTwoToneIcon","AddIcon","Fab","SearchPage","fetchBusinesses","addBusiness","addCompetitor","removeBusiness","removeCompetitor","selectBusiness","setActiveTabs","axios","mapsKey","process","env","REACT_APP_MAPS_KEY","useStyles","theme","card","display","flexDirection","transitionDuration","width","height","margin","padding","borderRadius","position","DashboardPlus","props","classes","modifyActiveTab","business","contains","activeTabs","forEach","tab","businessId","selectedBusiness","console","log","tabIndex","newTabsArray","filter","item","index","splice","localStorage","getItem","flexWrap","justifyContent","alignItems","backgroundColor","marginLeft","marginTop","marginBottom","color","history","push","cursor","businesses","slice","map","alightItems","event","stopPropagation","id","top","right","left","businessName","objectFit","businessImg","competitors","competitor","mapStateToProps","state","userBusinesses","tabs","currentlySelectedBusiness"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\"\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport DeleteForeverOutlinedIcon from '@material-ui/icons/DeleteForeverOutlined';\r\nimport DeleteForeverTwoToneIcon from '@material-ui/icons/DeleteForeverTwoTone';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\nimport SearchPage from \"../../components/SearchPage\"\r\n\r\n// import Results from \"../components/search/results\";\r\n\r\nimport {\r\n  fetchBusinesses,\r\n  addBusiness,\r\n  addCompetitor,\r\n  removeBusiness,\r\n  removeCompetitor,\r\n  selectBusiness,\r\n  setActiveTabs\r\n} from \"../../actions/index\";\r\n\r\nimport axios from \"axios\";\r\n\r\nconst mapsKey = process.env.REACT_APP_MAPS_KEY;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  card: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    transitionDuration: \"0.3s\",\r\n    width: \"25%\",\r\n    height: \"40%\",\r\n    margin: 20,\r\n    padding: 20,\r\n    borderRadius: 20,\r\n    position: \"relative\"\r\n\r\n  },\r\n  // root: {\r\n  //   flexGrow: 1,\r\n  //   display: \"flex\",\r\n  //   paddingTop: \"5%\",\r\n  //   flexDirection: \"column\"\r\n  // },\r\n  // paper: {\r\n  //   padding: theme.spacing(1),\r\n  //   textAlign: \"center\",\r\n  //   color: theme.palette.text.secondary\r\n  // }\r\n}));\r\n\r\nfunction DashboardPlus(props) {\r\n  const classes = useStyles();\r\n\r\n  //get the currently selected tab, and set it to the newly selected business\r\n  function modifyActiveTab(business) {\r\n\r\n    let contains = null;\r\n    props.activeTabs.forEach((tab) => {\r\n      if (tab.businessId === business.businessId) {\r\n        contains = tab;\r\n      }\r\n    })\r\n    if (contains) {\r\n      props.selectBusiness(props.selectedBusiness, contains);//the user is trying to add a business that they already have a tab open for, just set that tab as selected\r\n    } else {\r\n      props.activeTabs.forEach((tab) => {\r\n        if (tab.businessId === props.selectedBusiness.businessId) {//the currently selected tab is always the currently selected business, so we can find it by seeing which tab = currentlySelectedBusiness\r\n          console.log(\"Got active tab\");\r\n          let tabIndex;\r\n          let newTabsArray = props.activeTabs.filter((item, index) => { console.log(\"FILTER INDEX\", index); if(item.businessId === tab.businessId) { tabIndex = index;} return item.businessId != tab.businessId });//remove the tab we want to modify\r\n          newTabsArray.splice(tabIndex, 0, {...business});//add back the tab but with the new name\r\n          console.log(\"Adding tab at index\", tabIndex);\r\n          props.setActiveTabs(props.activeTabs, newTabsArray, localStorage.getItem(\"userID\"))\r\n        }\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"business-results\"\r\n        style={{\r\n          width: \"90%\",\r\n          height: \"40%\",\r\n          display: \"flex\",\r\n          flexWrap: \"wrap\",\r\n          flexDirection: \"row\",\r\n          justifyContent: \"flex-start\",\r\n          alignItems: \"center\",\r\n          backgroundColor: \"white\",\r\n          marginLeft: \"5%\",\r\n          marginTop: '5%',\r\n          borderRadius: 20,\r\n          marginBottom: '5%',\r\n\r\n        }}>\r\n        {/* <div style={{ width: \"100%\", height: \"60vh\", flexDirection: \"row\", flexWrap: \"wrap\", justifyContent: \"space-around\" }}> */}\r\n\r\n        <h2 style={{ color: \"black\", marginLeft: \"3vh\" }}>My Businesses</h2>\r\n        <Tooltip title=\"Add a Business\" arrow>\r\n          <Card className={classes.card} onClick={() => { props.history.push(\"/search/business\") }} style={{ justifyContent: 'center', alignItems: 'center', height: \"20vh\", cursor: \"pointer\", width: \"15vw\", backgroundColor: \"#D7E2EB\" }}>\r\n            <Fab disabled aria-label=\"add\" >\r\n              <AddIcon />\r\n            </Fab>\r\n          </Card>\r\n        </Tooltip>\r\n        {console.log(\"Displaying business images of businesses: \", props.businesses)}\r\n        {\r\n          props.businesses.slice(0, 10).map(business => {\r\n            return (\r\n              <Card className={classes.card} onClick={() => { modifyActiveTab(business); props.selectBusiness(props.selectedBusiness, business); }} style={{ justifyContent: 'center', alightItems: 'center', height: \"20vh\", cursor: \"pointer\", width: \"15vw\", backgroundColor: \"#D7E2EB\" }}>\r\n                <Tooltip title=\"Delete\" arrow>\r\n                <DeleteForeverOutlinedIcon onClick={(event) => event.stopPropagation() & props.removeBusiness(business.id, localStorage.getItem(\"userID\"))} style={{position:\"absolute\", top:\"0\", right:\"0\", left:\"auto\", margin:\"1vh\"}} />\r\n                </Tooltip>\r\n                <h3>{business.businessName}</h3>\r\n                <img style={{ objectFit: \"cover\", width: \"100%\", height: \"80%\", borderRadius: \"10%\" }}\r\n                  src={business.businessImg} />\r\n              </Card>\r\n            )\r\n          })\r\n        }\r\n        {/* </div> */}\r\n      </div>\r\n      <div className=\"competitors-results\"\r\n        style={{\r\n          width: \"90%\",\r\n          height: \"40%\",\r\n          display: \"flex\",\r\n          flexWrap: \"wrap\",\r\n          flexDirection: \"row\",\r\n          justifyContent: \"flex-start\",\r\n          alignItems: \"center\",\r\n          backgroundColor: \"white\",\r\n          marginLeft: \"5%\",\r\n          marginTop: '5%',\r\n          borderRadius: 20,\r\n          marginBottom: '5%',\r\n\r\n        }}>\r\n\r\n        <h2 style={{ color: \"black\", marginLeft: \"3vh\" }}>My Competitors</h2>\r\n\r\n\r\n        <Tooltip title=\"Add a Competitor\" arrow>\r\n\r\n          <Card className={classes.card} onClick={() => { props.history.push(\"/search/competitor\") }} style={{ justifyContent: 'center', alignItems: 'center', height: \"20vh\", cursor: \"pointer\", width: \"15vw\", backgroundColor: \"#D7E2EB\" }}>\r\n            <Fab disabled aria-label=\"add\" >\r\n              <AddIcon />\r\n            </Fab>\r\n          </Card>\r\n        </Tooltip>\r\n\r\n\r\n        {\r\n          props.competitors.slice(0, 10).map(competitor => {\r\n            return (\r\n              <Card className={classes.card} onClick={() => { modifyActiveTab(competitor); props.selectBusiness(props.selectedBusiness, competitor); }} style={{ justifyContent: 'center', alightItems: 'center', height: \"20vh\", cursor: \"pointer\", width: \"15vw\", backgroundColor: \"#D7E2EB\" }}>\r\n                <Tooltip title=\"Delete\" arrow>\r\n                <DeleteForeverOutlinedIcon onClick={(event) => event.stopPropagation() & props.removeCompetitor(competitor.id, localStorage.getItem(\"userID\"))} style={{position:\"absolute\", top:\"0\", right:\"0\", left:\"auto\", margin:\"1vh\"}}>\r\n                </DeleteForeverOutlinedIcon>\r\n                </Tooltip>\r\n                <h3>{competitor.businessName}</h3>\r\n                <img style={{ objectFit: \"cover\", width: \"100%\", height: \"80%\", borderRadius: \"10%\" }}\r\n                  src={competitor.businessImg} />\r\n              </Card>\r\n            )\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  competitors: state.competitors.businesses,\r\n  businesses: state.userBusinesses.businesses,\r\n  activeTabs: state.tabs.activeTabs,\r\n  selectedBusiness: state.currentlySelectedBusiness\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, {\r\n  fetchBusinesses,\r\n  addBusiness,\r\n  addCompetitor,\r\n  removeBusiness,\r\n  removeCompetitor,\r\n  setActiveTabs,\r\n  selectBusiness\r\n})(DashboardPlus));\r\n"]},"metadata":{},"sourceType":"module"}